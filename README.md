# Daniel_Kyunkrikov_Pyperplan
## Examination

Задание: Создание мультиагентного планировщика с использованием Pyperplan, задачей которого является построение башни из четырёх блоков (A, B, C, D) двумя агентами, A1 и A2, с учётом ограничений на то, какие блоки каждый агент может обрабатывать.

Для данной задачи были созданы два файла PDDL: domain.pddl и problem.pddl.
Файлы были разработаны вручную на основе классической задачи "мира блоков" (Blocks World), но адаптированы для мультиагентного сценария. 

Домен был расширен добавлением типа agent и предиката can-handle, чтобы ограничить действия каждого агента конкретными блоками.

domain.pddl:

![image](https://github.com/user-attachments/assets/05aa18b2-f468-436b-9db1-608e815bf8eb)


Проблема была составлена с учётом конкретного начального состояния (все блоки на столе) и целевого состояния (башня A-B-C-D).

problem.pddl:

![image](https://github.com/user-attachments/assets/d47f3375-ff53-4faa-ae8d-070beef74bc6)

## Основной код

В связи со сложностями в работе с парсеом pddl, была написана функция парсинга:

![image](https://github.com/user-attachments/assets/b9d5f143-1f54-4749-a363-bb2dd968329c)

Функция принимает сырой план от Pyperplan и преобразует его в читаемый список, разбирает каждое действие на части: название действия, агент и параметры. Преобразует PDDL-формат в естественный язык и возвращает список строк для удобного вывода.

 ## Запуск и обработка результата pyperplan


Если файлы PDDL существуют, скрипт логирует сообщение о начале работы и запускает Pyperplan как модуль Python с помощью subprocess.run. Флаг --loglevel debug обеспечивает вывод подробных отладочных сообщений, таких как этапы grounding и итерации BFS.

Обработка результата работы pyperplan заключается в следующем: Если выполнение завершилось успешно (returncode == 0), скрипт проверяет наличие файла решения (.soln), читает его и передаёт в функцию parse_plan для преобразования. Затем он выводит план действий с нумерацией шагов в читаемом виде. Если файл решения отсутствует, выводится сообщение об ошибке.


Результатом выполнения кода явлется следующее:

![image](https://github.com/user-attachments/assets/8a97bfd8-dafd-4aac-a619-76575fba660a)

Здесь видго, что программа справилась с выполнением задачи (построение башни ABCD, в результате работы 2-х агентов планирования). 

## Debugging

Также одной из поставленных задача являлось предоставление видеоотчета, в котором будет визуализированы действия агентов в реальном времени. Данная задача решена не была. Тем не менее были предприняты попытки реализовать визуализацию действий агентов в выводе логов планирования как результат работы кода.

Реализация выводов Debug-логов Pyperplan:

![image](https://github.com/user-attachments/assets/3660f62f-4ed0-4a77-bae3-51d2cfb9cd28)

Результат работы измененной программы (exam4(1)debug.py) имеет следующий вид:


![image](https://github.com/user-attachments/assets/9846e76a-143a-430c-8acb-0f4eb9978532)
## ...

![image](https://github.com/user-attachments/assets/f5ef0e7f-45e2-448e-bd38-f95fda816700)

В приложеном изображении видно, что данный подход не визуализирует работу агентов планирования, а лишь технические данные (итерации, состояния) и не содержат информации о выполняемых действиях.

